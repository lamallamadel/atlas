spring:
  application:
    name: backend
  
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          time_zone: UTC
  
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    placeholders:
      json_type: JSONB
  
  mail:
    host: ${MAIL_HOST:localhost}
    port: ${MAIL_PORT:1025}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false

  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=10m

brain:
  scoring:
    base-url: ${BRAIN_SCORING_URL:http://localhost:8000}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_SCORING_TIMEOUT:5}
  dupli:
    base-url: ${BRAIN_DUPLI_URL:http://localhost:8001}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_DUPLI_TIMEOUT:30}
  fraud:
    base-url: ${BRAIN_FRAUD_URL:http://localhost:8002}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_FRAUD_TIMEOUT:5}
  match:
    base-url: ${BRAIN_MATCH_URL:http://localhost:8003}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_MATCH_TIMEOUT:10}
  proposal:
    base-url: ${BRAIN_PROPOSAL_URL:http://localhost:8004}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_PROPOSAL_TIMEOUT:15}
  nego:
    base-url: ${BRAIN_NEGO_URL:http://localhost:8005}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_NEGO_TIMEOUT:5}
  agent:
    base-url: ${BRAIN_AGENT_URL:http://localhost:8006}
    api-key: ${BRAIN_API_KEY:change-me-in-production}
    timeout-seconds: ${BRAIN_AGENT_TIMEOUT:15}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:

      show-details: always

      show-details: when-authorized
    proposal-service:
      base-url: "http://localhost:8002"
    nego-service:
      base-url: "http://localhost:8003"
    agent-service:
      base-url: "http://localhost:8004"
    document-service:
      base-url: "http://localhost:8005"
    info:
      enabled: true
    prometheus:
      enabled: true

  metrics:
    export:
      prometheus:
        enabled: true

ml:
  service:
    url: ${ML_SERVICE_URL:http://localhost:5000}
  training:
    enabled: ${ML_TRAINING_ENABLED:false}
    cron: ${ML_TRAINING_CRON:0 0 2 1 * ?}

logging:
  level:
    root: INFO
    com.example.backend: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
