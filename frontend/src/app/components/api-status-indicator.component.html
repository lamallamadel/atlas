<div class="api-status-indicator" [class]="getStatusClass()">
  <button
    mat-button
    [matMenuTriggerFor]="statusMenu"
    class="status-button"
    [matTooltip]="getTooltipText()"
    matTooltipPosition="below">
    <span class="status-dot"></span>
    <span class="status-text">{{ getStatusText() }}</span>
  </button>
  
  <mat-menu #statusMenu="matMenu">
    <div class="status-menu-content" mat-menu-item disabled>
      <div class="status-info">
        <mat-icon [class]="getStatusClass()">
          {{ apiStatus === 'connected' ? 'check_circle' : apiStatus === 'disconnected' ? 'error' : 'sync' }}
        </mat-icon>
        <div class="status-details">
          <div class="status-label">{{ getStatusText() }}</div>
          <div class="status-timestamp" *ngIf="lastChecked">
            Dernière vérification: {{ lastChecked | date:'short' }}
          </div>
        </div>
      </div>
    </div>
    <mat-divider></mat-divider>
    <button 
      mat-menu-item 
      (click)="checkApiConnection()"
      [disabled]="apiStatus === 'checking'">
      <mat-icon>refresh</mat-icon>
      <span>Actualiser</span>
    </button>
  </mat-menu>
</div>
