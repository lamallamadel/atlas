/* ========================================
   PRINT STYLES
   Print-optimized styles for annonce and dossier detail pages
   ======================================== */

@media print {
  /* ========================================
     GLOBAL PRINT SETTINGS
     ======================================== */
  
  * {
    /* Remove shadows and transitions for faster printing */
    box-shadow: none !important;
    text-shadow: none !important;
    transition: none !important;
    animation: none !important;
  }

  body {
    background: white !important;
    color: black !important;
    font-size: 12pt;
    line-height: 1.5;
    margin: 0;
    padding: 0;
  }

  /* ========================================
     HIDE NAVIGATION & INTERACTIVE ELEMENTS
     ======================================== */
  
  /* Hide navigation components */
  mat-sidenav,
  mat-sidenav-container mat-sidenav,
  .sidenav,
  .sidenav-container mat-sidenav,
  mat-toolbar,
  .top-toolbar,
  .sidenav-header,
  nav,
  .nav-list,
  mat-nav-list {
    display: none !important;
  }

  /* Hide interactive buttons and controls */
  button,
  .btn-back,
  .btn-edit,
  .btn-delete,
  .btn-add,
  .btn-cancel,
  .btn-update-status,
  .btn-change-status,
  .btn-update-lead,
  .btn-add-lead,
  .btn-retry,
  .btn-complete,
  .action-buttons button,
  mat-icon-button,
  .menu-button,
  .theme-toggle-button,
  .user-menu-button,
  .user-menu-container,
  mat-paginator,
  .consent-actions,
  .consent-btn,
  .tab-header-actions {
    display: none !important;
  }

  /* Hide form elements and inputs */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  select,
  textarea,
  .form-input,
  .form-select,
  .filter-select,
  .status-change-form,
  .lead-form,
  .audit-filters,
  mat-form-field {
    display: none !important;
  }

  /* Hide dialogs, modals, overlays */
  mat-dialog-container,
  .mat-mdc-dialog-container,
  .cdk-overlay-container,
  mat-menu,
  mat-expansion-panel-header,
  .mat-expansion-panel-header,
  .skip-to-content {
    display: none !important;
  }

  /* Hide snackbars and notifications */
  mat-snack-bar-container,
  .mat-mdc-snack-bar-container {
    display: none !important;
  }

  /* Hide tabs navigation but keep content */
  mat-tab-header,
  .mat-mdc-tab-header,
  .mat-mdc-tab-labels {
    display: none !important;
  }

  /* Hide loading skeletons and spinners */
  app-loading-skeleton,
  .spinner-small,
  .loading-state {
    display: none !important;
  }

  /* Hide expansion panel headers */
  mat-expansion-panel-header {
    display: none !important;
  }

  /* ========================================
     PAGE LAYOUT & STRUCTURE
     ======================================== */
  
  .page-container,
  .sidenav-content,
  mat-sidenav-content {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
  }

  .main-content,
  .page-content,
  .detail-content {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 1cm !important;
  }

  /* Page header for print */
  .page-header {
    position: static !important;
    background: white !important;
    padding: 0 0 0.5cm 0 !important;
    box-shadow: none !important;
    border-bottom: 2pt solid black;
    margin-bottom: 0.5cm;
  }

  .page-title,
  .dossier-title {
    font-size: 18pt !important;
    font-weight: bold !important;
    color: black !important;
    margin: 0 0 0.25cm 0 !important;
    page-break-after: avoid;
  }

  /* ========================================
     SHOW FULL URLS FOR LINKS
     ======================================== */
  
  a[href]:after {
    content: " (" attr(href) ")";
    font-size: 10pt;
    color: #555;
    word-wrap: break-word;
  }

  /* Don't show URLs for links that are just anchors or routing */
  a[href^="#"]:after,
  a[href^="javascript:"]:after,
  a[routerLink]:after,
  a[href^="/"]:after {
    content: "";
  }

  /* ========================================
     TABLES - PAGE BREAK OPTIMIZATION
     ======================================== */
  
  table,
  .data-table {
    width: 100% !important;
    border-collapse: collapse !important;
    page-break-inside: auto;
    font-size: 10pt;
    margin-bottom: 0.5cm;
  }

  thead,
  .data-table thead {
    display: table-header-group;
    font-weight: bold;
  }

  tbody,
  .data-table tbody {
    display: table-row-group;
  }

  tr {
    page-break-inside: avoid;
    page-break-after: auto;
  }

  th,
  td {
    padding: 8pt 6pt !important;
    border: 1pt solid #333 !important;
    text-align: left;
    vertical-align: top;
  }

  th {
    background-color: #f0f0f0 !important;
    font-weight: bold;
    color: black !important;
  }

  /* Repeat table headers on each page */
  thead {
    display: table-header-group;
  }

  tfoot {
    display: table-footer-group;
  }

  /* Optimize table wrapper */
  .data-table-wrapper {
    overflow: visible !important;
    max-height: none !important;
  }

  /* ========================================
     MONOCHROME-FRIENDLY BADGE COLORS
     ======================================== */
  
  /* Status badges - use borders and text for differentiation */
  .status-badge,
  app-badge-status,
  .channel-badge,
  .direction-badge,
  .consent-badge,
  .audit-action-badge {
    display: inline-block !important;
    padding: 2pt 6pt !important;
    border: 1pt solid black !important;
    border-radius: 3pt !important;
    background: white !important;
    color: black !important;
    font-size: 9pt !important;
    font-weight: bold !important;
    text-transform: uppercase;
  }

  /* Add prefix text for better identification in black & white */
  .status-badge:before,
  app-badge-status:before {
    content: "STATUS: ";
    font-weight: normal;
    font-size: 8pt;
  }

  .channel-badge:before {
    content: "CH: ";
    font-weight: normal;
    font-size: 8pt;
  }

  .direction-badge:before {
    content: "DIR: ";
    font-weight: normal;
    font-size: 8pt;
  }

  .consent-badge:before {
    content: "CONSENT: ";
    font-weight: normal;
    font-size: 8pt;
  }

  /* Specific status styles for monochrome */
  .status-scheduled,
  .status-badge.status-scheduled {
    border-style: dashed !important;
  }

  .status-completed,
  .status-badge.status-completed {
    border-style: double !important;
    border-width: 2pt !important;
  }

  .status-cancelled,
  .status-badge.status-cancelled {
    text-decoration: line-through !important;
  }

  .consent-granted,
  .consent-badge.consent-granted {
    border-width: 2pt !important;
  }

  .consent-denied,
  .consent-badge.consent-denied {
    background: #e0e0e0 !important;
  }

  .consent-revoked,
  .consent-badge.consent-revoked {
    text-decoration: line-through !important;
  }

  /* ========================================
     CARDS & SECTIONS
     ======================================== */
  
  mat-card,
  .info-section,
  .consent-card,
  .message-card {
    page-break-inside: avoid;
    border: 1pt solid #333 !important;
    background: white !important;
    padding: 0.5cm !important;
    margin-bottom: 0.5cm !important;
    box-shadow: none !important;
  }

  mat-card-header,
  .consent-card-header,
  .message-card-header {
    margin-bottom: 0.25cm !important;
    padding-bottom: 0.25cm !important;
    border-bottom: 1pt solid #333 !important;
  }

  mat-card-title,
  .consent-channel-title {
    font-size: 12pt !important;
    font-weight: bold !important;
    color: black !important;
  }

  mat-card-content,
  .consent-card-body,
  .message-card-body {
    padding: 0.25cm 0 !important;
  }

  /* ========================================
     DETAIL ROWS & FIELD GROUPS
     ======================================== */
  
  .detail-row,
  .field-row {
    display: flex !important;
    padding: 6pt 0 !important;
    border-bottom: 0.5pt solid #ddd !important;
    page-break-inside: avoid;
  }

  .detail-label,
  .field-label {
    font-weight: bold !important;
    min-width: 150pt !important;
    color: black !important;
    font-size: 10pt !important;
  }

  .detail-value,
  .field-value {
    flex: 1 !important;
    color: black !important;
    font-size: 10pt !important;
  }

  .field-group {
    margin-bottom: 0.5cm !important;
  }

  /* ========================================
     TABS CONTENT
     ======================================== */
  
  mat-tab-group,
  .tabs-container {
    display: block !important;
  }

  mat-tab-body,
  .mat-mdc-tab-body {
    display: block !important;
    overflow: visible !important;
  }

  .mat-mdc-tab-body-content {
    overflow: visible !important;
    transform: none !important;
  }

  /* Show all tabs content */
  .mat-mdc-tab-body-wrapper {
    position: static !important;
    overflow: visible !important;
    height: auto !important;
  }

  /* Add tab section headers for print */
  .tab-content:before {
    content: attr(data-tab-label);
    display: block;
    font-size: 14pt;
    font-weight: bold;
    margin-top: 0.5cm;
    margin-bottom: 0.25cm;
    padding-bottom: 0.25cm;
    border-bottom: 2pt solid black;
    page-break-after: avoid;
  }

  .tab-content {
    page-break-inside: avoid;
    margin-bottom: 0.5cm;
  }

  /* ========================================
     MESSAGES & TIMELINE
     ======================================== */
  
  .message-card {
    margin-bottom: 0.25cm !important;
  }

  .message-timestamp {
    font-size: 9pt !important;
    color: #555 !important;
  }

  .message-badges {
    display: inline-flex !important;
    gap: 4pt !important;
  }

  .message-content {
    margin: 0.25cm 0 0 0 !important;
    font-size: 10pt !important;
    color: black !important;
  }

  /* Hide "voir plus" links in print */
  .voir-plus {
    display: none !important;
  }

  /* ========================================
     APPOINTMENTS
     ======================================== */
  
  .appointment-datetime {
    font-size: 10pt !important;
  }

  .datetime-start,
  .datetime-end {
    display: block !important;
    color: black !important;
  }

  /* ========================================
     AUDIT HISTORY
     ======================================== */
  
  .audit-table th,
  .audit-table td {
    font-size: 9pt !important;
  }

  .audit-date {
    white-space: nowrap !important;
  }

  .audit-changes {
    max-width: 200pt !important;
  }

  .changes-list {
    font-size: 8pt !important;
  }

  .change-item {
    margin-bottom: 2pt !important;
  }

  .change-field {
    font-weight: bold !important;
  }

  .change-arrow {
    margin: 0 2pt !important;
  }

  /* ========================================
     EXPANSION PANELS
     ======================================== */
  
  mat-expansion-panel {
    box-shadow: none !important;
    border: 1pt solid #333 !important;
    margin-bottom: 0.5cm !important;
  }

  mat-expansion-panel-content,
  .mat-expansion-panel-content {
    display: block !important;
    visibility: visible !important;
    height: auto !important;
    overflow: visible !important;
  }

  .advanced-content,
  .consent-history-content {
    padding: 0.5cm !important;
  }

  /* ========================================
     CONSENT SECTION
     ======================================== */
  
  .consent-cards-grid {
    display: block !important;
  }

  .consent-card {
    break-inside: avoid;
    margin-bottom: 0.5cm !important;
  }

  .consent-current-status {
    margin-bottom: 0.25cm !important;
  }

  .consent-status-row,
  .consent-date-row {
    display: flex !important;
    justify-content: space-between !important;
    padding: 4pt 0 !important;
  }

  .consent-label,
  .consent-date-label {
    font-weight: bold !important;
    font-size: 10pt !important;
  }

  /* ========================================
     EMPTY STATES
     ======================================== */
  
  .empty-message,
  .lead-empty-state {
    padding: 0.5cm !important;
    border: 1pt dashed #999 !important;
    text-align: center !important;
    font-style: italic !important;
    color: #666 !important;
  }

  /* ========================================
     WARNINGS & ERRORS IN PRINT
     ======================================== */
  
  .warning-message,
  .error-message,
  .success-message {
    border: 2pt solid black !important;
    background: white !important;
    color: black !important;
    padding: 0.25cm !important;
    margin-bottom: 0.25cm !important;
    page-break-inside: avoid;
  }

  .warning-message:before {
    content: "⚠ WARNING: ";
    font-weight: bold;
  }

  .error-message:before {
    content: "✗ ERROR: ";
    font-weight: bold;
  }

  .success-message:before {
    content: "✓ SUCCESS: ";
    font-weight: bold;
  }

  /* ========================================
     PAGE BREAK CONTROLS
     ======================================== */
  
  /* Force page breaks before major sections */
  .dossier-header,
  .sections-container,
  mat-tab-group {
    page-break-before: auto;
  }

  /* Avoid breaks in these elements */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    page-break-inside: avoid;
  }

  /* Prevent breaks inside these elements */
  .detail-section,
  .info-section,
  .consent-card,
  .message-card {
    page-break-inside: avoid;
  }

  /* ========================================
     PRINT HEADER & FOOTER
     ======================================== */
  
  @page {
    margin: 2cm 1.5cm;
    size: A4 portrait;
    
    @top-right {
      content: "Page " counter(page) " of " counter(pages);
      font-size: 9pt;
      color: #666;
    }
    
    @bottom-left {
      content: "Imprimé le " string(current-date);
      font-size: 9pt;
      color: #666;
    }
  }

  /* First page no header */
  @page :first {
    margin-top: 2cm;
  }

  /* ========================================
     ANNONCE DETAIL SPECIFIC
     ======================================== */
  
  .detail-title {
    font-size: 14pt !important;
    font-weight: bold !important;
    color: black !important;
  }

  .detail-description {
    white-space: pre-wrap !important;
    font-size: 10pt !important;
  }

  /* ========================================
     SECTIONS CONTAINER LAYOUT
     ======================================== */
  
  .sections-container {
    display: block !important;
  }

  .sections-container > * {
    width: 100% !important;
    margin-bottom: 0.5cm !important;
  }

  /* ========================================
     UTILITIES
     ======================================== */
  
  /* Ensure images don't break pages */
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }

  /* Remove hover states */
  *:hover {
    background: inherit !important;
    color: inherit !important;
  }

  /* Ensure proper text wrapping */
  * {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  /* Remove animations and transitions */
  *,
  *::before,
  *::after {
    animation-duration: 0s !important;
    transition-duration: 0s !important;
  }
}

/* ========================================
   COLOR PRINT MEDIA QUERY (OPTIONAL)
   Preserves some colors when printing to color printers
   ======================================== */

@media print and (color) {
  .status-badge {
    background: #f0f0f0 !important;
  }

  .warning-message {
    background: #fffbf0 !important;
    border-left-color: #ff9800 !important;
  }

  .error-message {
    background: #ffebee !important;
    border-left-color: #e74c3c !important;
  }

  .success-message {
    background: #e8f5e9 !important;
    border-left-color: #4caf50 !important;
  }

  th {
    background-color: #e3f2fd !important;
  }
}
